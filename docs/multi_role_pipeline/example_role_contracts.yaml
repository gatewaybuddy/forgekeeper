version: 1
updated_at: 2024-07-06
roles:
  - id: PLAN
    name: Planning Orchestrator
    summary: Prioritises backlog entries and seeds scoped execution requests.
    responsibilities:
      - Translate roadmap goals into actionable execution briefs.
      - Validate prerequisite artifacts before promoting work to Implementers.
      - Monitor dependency completion and resequence backlog items when risks materialise.
    inputs:
      - source: Roadmap Service
        artifacts:
          - roadmap.yaml snapshot
          - milestone risk register excerpt
      - source: Memory Service
        artifacts:
          - episodic_summary.json
    outputs:
      - artifact: execution_brief.yaml
        consumer: IMPLEMENT
        notes: Stored in workflow queue `plan.execute`.
      - artifact: dependency_alert.md
        consumer: STAKEHOLDER
    handoffs:
      - to: IMPLEMENT
        success_criteria: Execution brief acknowledged within SLA.
        channel: Workflow queue `plan.execute`
      - to: STAKEHOLDER
        success_criteria: Risk acknowledgement recorded in Confluence.
        channel: Email + Slack (#mrp-alerts)
    service_accounts:
      - name: svc-plan-orchestrator
        environment: prod
        permissions:
          - roadmap.read
          - workflow.write.plan
    tools:
      - name: roadmap_api
        allowlist: ["GET /v1/roadmap", "POST /v1/risk"]
        audit_log: contextlog.roadmap
      - name: workflow_queue
        allowlist: ["publish", "ack"]
        audit_log: contextlog.workflow
    decision_rights:
      - Adjust work priority within approved sprint boundaries.
      - Request clarifications from stakeholders without escalation.
    sla:
      response_minutes: 30
      resolution_minutes: 240
      coverage_hours: 16x5
    metrics:
      - planning_cycle_time_minutes
      - blocked_task_rate
    escalation:
      contact: product-duty@forgekeeper.local
      policy: product_playbook_v3

  - id: IMPLEMENT
    name: Implementation Executor
    summary: Produces code, configuration, and documentation updates for approved briefs.
    responsibilities:
      - Generate change plans based on planner briefs.
      - Execute automated validations prior to handoff.
      - Capture tool usage and artifact metadata for audit trails.
    inputs:
      - source: PLAN
        artifacts:
          - execution_brief.yaml
      - source: Source Control
        artifacts:
          - repo_snapshot.tgz
    outputs:
      - artifact: change_bundle.tar.gz
        consumer: REVIEW
        notes: Includes diff, tests, and telemetry logs.
      - artifact: tool_usage.json
        consumer: SAFETY
    handoffs:
      - to: REVIEW
        success_criteria: Bundle uploaded and validation checks green.
        channel: Workflow queue `implement.review`
    service_accounts:
      - name: svc-implement-builder
        environment: prod
        permissions:
          - repo.clone
          - sandbox.execute
          - workflow.write.implement
    tools:
      - name: sandbox_runner
        allowlist: ["create", "exec", "destroy"]
        audit_log: contextlog.sandbox
    decision_rights:
      - Abort execution when sandbox guardrails trip.
    sla:
      response_minutes: 20
      resolution_minutes: 360
      coverage_hours: 24x5
    metrics:
      - pass_rate_validations
      - sandbox_runtime_minutes
    escalation:
      contact: eng-duty@forgekeeper.local
      policy: eng_playbook_v2

  - id: REVIEW
    name: Quality Reviewer
    summary: Validates implementation bundles, enforces policy gates, and promotes work to deployment.
    responsibilities:
      - Execute policy engine checks and manual spot reviews.
      - Ensure safety sign-off for high-risk changes.
      - Publish audit trail linking change bundles to approvals.
    inputs:
      - source: IMPLEMENT
        artifacts:
          - change_bundle.tar.gz
      - source: Safety Office
        artifacts:
          - risk_profile.json
    outputs:
      - artifact: approval_record.json
        consumer: DEPLOY
      - artifact: remediation_request.md
        consumer: IMPLEMENT
    handoffs:
      - to: DEPLOY
        success_criteria: Approvals logged in policy engine and surfaced in dashboard.
        channel: Workflow queue `review.deploy`
    service_accounts:
      - name: svc-review-policy
        environment: prod
        permissions:
          - policy.evaluate
          - workflow.write.review
    tools:
      - name: policy_engine
        allowlist: ["evaluate", "approve", "reject"]
        audit_log: contextlog.policy
    decision_rights:
      - Block deployment pending safety clarification.
    sla:
      response_minutes: 15
      resolution_minutes: 180
      coverage_hours: 16x5
    metrics:
      - review_cycle_time_minutes
      - blocked_change_rate
    escalation:
      contact: qa-duty@forgekeeper.local
      policy: qa_playbook_v1
